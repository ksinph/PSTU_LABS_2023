# Вариант задания
Лабараторная работа №8, вариант 1.
Сформировать двоичный файл из элементов, заданной в
варианте структуры, распечатать его содержимое, выполнить
удаление и добавление элементов в соответствии со своим
вариантом, используя для поиска удаляемых или добавляемых
элементов функцию. Формирование, печать, добавление и
удаление элементов оформить в виде функций. Предусмотреть
сообщения об ошибках при открытии файла и выполнении
операций ввода/вывода.
Структура "Абитуриент":
- фамилия, имя, отчество;
- год рождения;
- оценки вступительных экзаменов (3);
- средний балл аттестата.
Удалить элемент с указанным номером, добавить элемент
после элемента с указанной фамилией.
# Код программы
```cpp
#define _CRT_SECURE_NO_WARNINGS
#include <iostream>
#include <fstream>
#include <string>
#include <Windows.h> // Обязательно для SetConsoleCP() и SetConsoleOutputCP()
using namespace std;

struct abt
{
	char surname[30];
	char name[30];
	char patronymic[30];
	int year;
	int ekz_math;
	int ekz_rush;
	int ekz_choose;
	float certificate;
	void read()
	{
		cout << "Введённые данные:" << endl;
		cout << surname<<" ";
		cout << name<<" ";
		cout << patronymic << endl;
		cout << year << endl;
		cout << ekz_math << endl;
		cout << ekz_rush << endl;
		cout << ekz_choose << endl;
		cout << certificate << endl;
	}
	void write()
	{
		cout << endl << "Введите фамилию абитуриента ";
		cin>>surname;
		cout <<"Введите имя абитуриента ";
		cin>>name;
		cout << "Введите отчество абитуриента ";
		cin>>patronymic;
		cout << "Введите год рождения ";
		cin >> year;
		cout << "Введите оценку за математику ";
		cin >> ekz_math;
		cout << "Введите оценку за русский ";
		cin >> ekz_rush;
		cout << "Введите оценку за экзамен на выбор ";
		cin >> ekz_choose;
		cout << "Введите среднюю оценку за аттестат ";
		cin >> certificate;
	}
};
void deleter(int num)
{
	abt user;
	FILE* f1;
	FILE* f2;
	int n;
	if ((f1 = fopen("file.bin", "rb")) == NULL) exit(1);
	if ((f2 = fopen("filetmp.bin", "wb")) == NULL) exit(2);
	fread(&n, sizeof(int), 1, f1);
	n -= 1;
	fwrite(&n, sizeof(int), 1, f2);
	for (int i = 0; i < num - 1; i++)
	{
		fread(&user, sizeof(abt), 1, f1);
		fwrite(&user, sizeof(abt), 1, f2);
	}
	fread(&user, sizeof(abt), 1, f1);
	for (int i = num; i < n + 1; i++)
	{
		fread(&user, sizeof(abt), 1, f1);
		fwrite(&user, sizeof(abt), 1, f2);
	}
	fclose(f1);
	fclose(f2);
}
void insert(string surnamep)
{
	int n;
	abt user;
	FILE* f1;
	FILE* f2;
	
	if ((f1 = fopen("filetmp.bin", "rb")) == NULL) exit(3);
	if ((f2 = fopen("file.bin", "wb")) == NULL) exit(4);
	fread(&n, sizeof(int), 1, f1);
	n += 1;
	fwrite(&n, sizeof(int), 1, f2);

	for (int i = 0; i < n; i++)
	{
		fread(&user, sizeof(abt), 1, f1);
		fwrite(&user, sizeof(abt), 1, f2);
		
		if (surnamep==user.surname)
		{
			user.write();
			fwrite(&user, sizeof(abt), 1, f2);
		}
	}
	fclose(f1);
	fclose(f2);
}
int main()
{
	SetConsoleCP(1251);
	SetConsoleOutputCP(1251);
	int n;
	FILE* F;
	abt user;
	if ((F = fopen("file.bin", "wb")) == NULL) exit(5);
	cout << "Введите колво абитуриентов "; cin >> n;
	fwrite(&n, sizeof(int), 1, F);
	for (int i = 0; i < n; i++)
	{
		user.write();
		fwrite(&user, sizeof(abt), 1, F);
	}
	fclose(F);
	if ((F = fopen("file.bin", "rb")) == NULL) exit(6);
	fread(&n, sizeof(int), 1, F);
	for (int i = 0; i < n; i++)
	{
		fread(&user, sizeof(abt), 1, F);
		user.read();
	}
	fclose(F);

	int num;
	cout << "Введите номер записи, которую нужно удалить ";
	cin >> num;
	deleter(num);

	if ((F = fopen("filetmp.bin", "rb")) == NULL) exit(7);
	fread(&n, sizeof(int), 1, F);
	for (int i = 0; i < n; i++)
	{
		fread(&user, sizeof(abt), 1, F);
		user.read();
	}
	fclose(F);

	cout << "Введите фамилию, после которой нужно вставить элемент: ";
	string surnamep; cin >> surnamep;
	insert(surnamep);
	if ((F = fopen("file.bin", "rb")) == NULL) exit(8);
	fread(&n, sizeof(int), 1, F);
	for (int i = 0; i < n; i++)
	{
		fread(&user, sizeof(abt), 1, F);
		user.read();
	}
	fclose(F);
	return 0;
}
```
# Блок-схема программы
## Функция main
<image src="8.drawio.svg">

## Структура abt
<image src="8_struct.drawio.svg">	

## Функция read
<image src="8_read.drawio.svg">	

## Функция write
<image src="8_write.drawio.svg">	

## Функция deleter
<image src="8_deleter.drawio.svg">	

## Функция insert
<image src="8_insert.drawio.svg">	
	
# Тесты
### Пример 1
Входные данные:
```
Введите колво абитуриентов 3

Введите фамилию абитуриента Путин
Введите имя абитуриента Владимир
Введите отчество абитуриента Владимирович
Введите год рождения 1952
Введите оценку за математику 5
Введите оценку за русский 5
Введите оценку за экзамен на выбор 5
Введите среднюю оценку за аттестат 5.00

Введите фамилию абитуриента Байден
Введите имя абитуриента Джо
Введите отчество абитуриента нет
Введите год рождения 1942
Введите оценку за математику 5
Введите оценку за русский 2
Введите оценку за экзамен на выбор 4
Введите среднюю оценку за аттестат 4.50

Введите фамилию абитуриента Жириновский
Введите имя абитуриента Владимир
Введите отчество абитуриента Вольфович
Введите год рождения 1946
Введите оценку за математику 5
Введите оценку за русский 4
Введите оценку за экзамен на выбор 3
Введите среднюю оценку за аттестат 4.00
Введите номер записи, которую нужно удалить 2
Введите фамилию, после которой нужно вставить элемент: Путин

Введите фамилию абитуриента Сталин
Введите имя абитуриента Иосиф
Введите отчество абитуриента Виссарионович
Введите год рождения 1878
Введите оценку за математику 4
Введите оценку за русский 5
Введите оценку за экзамен на выбор 5
Введите среднюю оценку за аттестат 3.9
```
Выходные данные:
```
Путин Владимир Владимирович
1952
5
5
5
5.0
Сталин Иосиф Виссарионович
1878
4
5
5
3.95
Жириновский Владимир Вольфович
1946
5
4
3
4.0
```
### Пример 2
Входные данные:
```
Введите колво абитуриентов 1

Введите фамилию абитуриента Хорошилова
Введите имя абитуриента Ксения
Введите отчество абитуриента Павловна
Введите год рождения 2005
Введите оценку за математику 4
Введите оценку за русский 5
Введите оценку за экзамен на выбор 5
Введите среднюю оценку за аттестат 4.90
Введите номер записи, которую нужно удалить 0
Введите фамилию, после которой нужно вставить элемент: Хорошилова

Введите фамилию абитуриента Аверина
Введите имя абитуриента Анастасия
Введите отчество абитуриента Михайловна
Введите год рождения 2005
Введите оценку за математику 4
Введите оценку за русский 5
Введите оценку за экзамен на выбор 5
Введите среднюю оценку за аттестат 4.9
```
Выходные данные:
```
Хорошилова Ксения Павловна
2005
4
5
5
4.9
Аверина Анастасия Михайловна
2005
4
5
5
4.9
```
### Пример 3
Входные данные:
```
Введите колво абитуриентов 0
Введите номер записи, которую нужно удалить 0
Введите фамилию, после которой нужно вставить элемент: 0
```
Выходные данные:
```

```
